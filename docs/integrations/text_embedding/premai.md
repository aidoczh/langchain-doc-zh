# PremAI
[PremAI](https://app.premai.io) æ˜¯ä¸€ä¸ªç»Ÿä¸€å¹³å°ï¼Œè®©æ‚¨èƒ½å¤Ÿè½»æ¾æ„å»ºåŠŸèƒ½å¼ºå¤§ã€å¯ç«‹å³æŠ•å…¥ç”Ÿäº§çš„ GenAI åº”ç”¨ç¨‹åºï¼Œä»è€Œè®©æ‚¨èƒ½å¤Ÿæ›´ä¸“æ³¨äºç”¨æˆ·ä½“éªŒå’Œæ•´ä½“å¢é•¿ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•é€šè¿‡ `PremAIEmbeddings` æ¥è®¿é—®ä¸åŒçš„åµŒå…¥æ¨¡å‹ã€‚
## å®‰è£…å’Œè®¾ç½®
æˆ‘ä»¬é¦–å…ˆå®‰è£… langchain å’Œ premai-sdkã€‚æ‚¨å¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š
```bash
pip install premai langchain
```
åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²åœ¨ Prem ä¸Šåˆ›å»ºäº†ä¸€ä¸ªå¸æˆ·å¹¶å·²å¯åŠ¨äº†ä¸€ä¸ªé¡¹ç›®ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤å…è´¹å¼€å§‹ï¼š
1. ç™»å½• [PremAI](https://app.premai.io/accounts/login/)ï¼Œå¦‚æœæ‚¨æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œè¯·åˆ›å»ºæ‚¨çš„ API å¯†é’¥ [here](https://app.premai.io/api_keys/)ã€‚
2. è¿›å…¥ [app.premai.io](https://app.premai.io)ï¼Œè¿™å°†å¸¦æ‚¨è¿›å…¥é¡¹ç›®çš„ä»ªè¡¨æ¿ã€‚
3. åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¿™å°†ç”Ÿæˆä¸€ä¸ªé¡¹ç›® IDï¼ˆå†™ä½œ IDï¼‰ã€‚æ­¤ ID å°†å¸®åŠ©æ‚¨ä¸éƒ¨ç½²çš„åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚
æ­å–œæ‚¨åœ¨ Prem ä¸Šåˆ›å»ºäº†æ‚¨çš„ç¬¬ä¸€ä¸ªéƒ¨ç½²åº”ç”¨ç¨‹åº ğŸ‰ ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ langchain ä¸æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚
```python
# è®©æˆ‘ä»¬é¦–å…ˆå¯¼å…¥ä¸€äº›æ¨¡å—å¹¶å®šä¹‰æˆ‘ä»¬çš„åµŒå…¥å¯¹è±¡
from langchain_community.embeddings import PremAIEmbeddings
```
ä¸€æ—¦æˆ‘ä»¬å¯¼å…¥äº†æ‰€éœ€çš„æ¨¡å—ï¼Œè®©æˆ‘ä»¬è®¾ç½®å®¢æˆ·ç«¯ã€‚ç°åœ¨å‡è®¾æˆ‘ä»¬çš„ `project_id` æ˜¯ 8ã€‚ä½†è¯·ç¡®ä¿æ‚¨ä½¿ç”¨æ‚¨çš„é¡¹ç›® IDï¼Œå¦åˆ™å°†ä¼šå‡ºé”™ã€‚
```python
import getpass
import os
if os.environ.get("PREMAI_API_KEY") is None:
    os.environ["PREMAI_API_KEY"] = getpass.getpass("PremAI API Key:")
```
```python
model = "text-embedding-3-large"
embedder = PremAIEmbeddings(project_id=8, model=model)
```
æˆ‘ä»¬å·²ç»å®šä¹‰äº†æˆ‘ä»¬çš„åµŒå…¥æ¨¡å‹ã€‚æˆ‘ä»¬æ”¯æŒè®¸å¤šåµŒå…¥æ¨¡å‹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼Œæ˜¾ç¤ºäº†æˆ‘ä»¬æ”¯æŒçš„åµŒå…¥æ¨¡å‹æ•°é‡ã€‚
| æä¾›å•†    | Slug                                     | ä¸Šä¸‹æ–‡æ ‡è®°æ•° |
|-------------|------------------------------------------|----------------|
| cohere      | embed-english-v3.0                       | N/A            |
| openai      | text-embedding-3-small                   | 8191           |
| openai      | text-embedding-3-large                   | 8191           |
| openai      | text-embedding-ada-002                   | 8191           |
| replicate   | replicate/all-mpnet-base-v2              | N/A            |
| together    | togethercomputer/Llama-2-7B-32K-Instruct | N/A            |
| mistralai   | mistral-embed                            | 4096           |
è¦æ›´æ”¹æ¨¡å‹ï¼Œæ‚¨åªéœ€å¤åˆ¶ `slug` å¹¶è®¿é—®æ‚¨çš„åµŒå…¥æ¨¡å‹ã€‚ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹ä½¿ç”¨æˆ‘ä»¬çš„åµŒå…¥æ¨¡å‹ï¼Œå…ˆè¿›è¡Œå•ä¸ªæŸ¥è¯¢ï¼Œç„¶åè¿›è¡Œå¤šä¸ªæŸ¥è¯¢ï¼ˆä¹Ÿç§°ä¸ºæ–‡æ¡£ï¼‰ã€‚
```python
query = "ä½ å¥½ï¼Œè¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æŸ¥è¯¢"
query_result = embedder.embed_query(query)
# è®©æˆ‘ä»¬æ‰“å°æŸ¥è¯¢åµŒå…¥å‘é‡çš„å‰äº”ä¸ªå…ƒç´ 
print(query_result[:5])
```
```output
[-0.02129288576543331, 0.0008162345038726926, -0.004556538071483374, 0.02918623760342598, -0.02547479420900345]
```
æœ€åè®©æˆ‘ä»¬åµŒå…¥ä¸€ä¸ªæ–‡æ¡£ã€‚
```python
documents = ["è¿™æ˜¯æ–‡æ¡£1", "è¿™æ˜¯æ–‡æ¡£2", "è¿™æ˜¯æ–‡æ¡£3"]
doc_result = embedder.embed_documents(documents)
# ä¸ä¹‹å‰çš„ç»“æœç±»ä¼¼ï¼Œè®©æˆ‘ä»¬æ‰“å°ç¬¬ä¸€ä¸ªæ–‡æ¡£å‘é‡çš„å‰äº”ä¸ªå…ƒç´ 
print(doc_result[0][:5])
```
```output
[-0.0030691148713231087, -0.045334383845329285, -0.0161729846149683, 0.04348714277148247, -0.0036920777056366205]
```